<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<head>

<link rel="stylesheet"
	href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://npmcdn.com/react@15.3.0/dist/react.js"></script>
<script src="https://npmcdn.com/react-dom@15.3.0/dist/react-dom.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
<script src="https://npmcdn.com/react-router/umd/ReactRouter.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script
	src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

	<div id="container"></div>

	<script type="text/babel">
import Home from './home.jsx';


var { Router,
    Route,
    IndexRoute,
    IndexLink,
    Link } = ReactRouter;
  
var destination = document.querySelector("#container");

  
class Contact extends React.Component {
	constructor(props){
		super(props);
	}

	render(){
      return (
        <div>
          <h2>GOT QUESTIONS?</h2>
          <p>The easiest thing to do is post on
          our <a href="http://forum.kirupa.com">forums</a>.
          </p>
        </div>
      );
	}
}
  
class Stuff extends React.Component {
	constructor(props){
		super(props);
	}

	handleClick(event){
	        $.ajax({
            type: "GET",
            contentType: "application/json",
            url: "http://localhost:8080/login",
            // data: JSON.stringify("TEST"),
            dataType: 'json',
            success: function(result){
                        alert(result);
                        alert(result.name);
                       }
        });
	}

	render(){
      return (
        <div>
          <h2>STUFF</h2>
          <p>Mauris sem velit, vehicula eget sodales vitae,
          rhoncus eget sapien:</p>
          <ol>
            <li>Nulla pulvinar diam</li>
            <li>Facilisis bibendum</li>
            <li>Vestibulum vulputate</li>
            <li>Eget erat</li>
            <li>Id porttitor</li>
          </ol>
     <div onClick={this.handleClick}>
        You d this. Click to toggle.
      </div>
        </div>
      );
	}
}
 

class Login extends React.Component {
	constructor(props){
		super(props);
		
		this.state = {
			 email: ''
		};

		this.onInput = this.onInput.bind(this)
	}

	onInput(event){
		this.setState({email: event.target.value});
	}

	onSubmit(event){
		alert("onSubmit");
	}

	render(){
				return (
				<div>
				<h2>Login</h2>
 <form className="form-horizontal">
  <div className="form-group">
    <label className="control-label col-sm-2" htmlFor="email">Email:</label>
    <div className="col-sm-10">
      <input type="email" name="email" className="form-control" id="email" placeholder="Enter email" onChange={this.onInput} value={this.state.email} />
    </div>
  </div>
  <div className="form-group">
    <label className="control-label col-sm-2" htmlFor="pwd">Password:</label>
    <div className="col-sm-10">
      <input type="password" className="form-control" id="pwd" placeholder="Enter password" />
    </div>
  </div>
  <div className="form-group">
    <div className="col-sm-offset-2 col-sm-10">
      <button type="submit" disabled={!this.state.email} className="btn btn-default" onClick={this.onSubmit}>Submit</button>
    </div>
  </div>
</form>
				</div>
		);
	}
}


class Register extends React.Component{
	
	constructor(props){
		super(props);

		this.state = {
			email: '',
			username: '',
			pwd: '',
		    status: false
		};

		this.onInput = this.onInput.bind(this)
	}

	onInput(event){
		switch (event.target.id) {
			case "username":	this.setState({username: event.target.value}); break;	
			case "email":		this.setState({email: event.target.value}); break;
			case "pwd":			this.setState({pwd: event.target.value}); break;
		}
		
		var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    
		
		if(username.value.length > 3 && pwd.value.length > 6 && re.test(email.value)){
			this.setState({status: true});
		}
		else{
			this.setState({status: false});
		}	
	}


	render(){
		return (
				<div>
				<h2>Sign Up</h2>
				 <form className="form-horizontal">
				 <div className="form-group">
    <label className="control-label col-sm-2" htmlFor="username">Username:</label>
    <div className="col-sm-10">
      <input type="text" name="username" className="form-control" id="username" placeholder="Enter username" value={this.state.username} onChange={this.onInput}/>
    </div>
  </div>
  <div className="form-group">
    <label className="control-label col-sm-2" htmlFor="email">Email:</label>
    <div className="col-sm-10">
      <input type="email" name="email" className="form-control" id="email" placeholder="Enter email" value={this.state.email} onChange={this.onInput}/>
    </div>
  </div>
  <div className="form-group">
    <label className="control-label col-sm-2" htmlFor="pwd">Password:</label>
    <div className="col-sm-10">
      <input type="password" className="form-control" id="pwd" placeholder="Enter password" value={this.state.pwd} onChange={this.onInput}/>
    </div>
  </div>
  <div className="form-group">
    <div className="col-sm-offset-2 col-sm-10">
      <button type="submit" className="btn btn-default" disabled={!this.state.status}>Submit</button>
    </div>
  </div>
</form>
				</div>
		);
	}
}


class App extends React.Component {
	constructor(props){
		super(props);
	}

	render(){
		return(
				<div>
			<nav className="navbar navbar-inverse">
				<div className="container-fluid">
				<ul className="nav navbar-nav">
					<li><IndexLink to="/">Home</IndexLink></li>
					<li><Link to="/stuff">Stuff</Link></li>
					<li><Link to="/contact">Contact</Link></li>
				</ul>
				<ul className="nav navbar-nav navbar-right">
					<li><Link to="/register"><span className="glyphicon glyphicon-user"></span> Sign Up</Link></li>
					<li><Link to="/login"><span className="glyphicon glyphicon-log-in"></span> Login</Link></li>
				</ul>
				</div>
			</nav>
			<div className="container">
{this.props.children}
</div>
</div>
    );
	}
}

 
ReactDOM.render(
  <Router>
    <Route path="/" component={App}>
        <IndexRoute component={Home}/>
    <Route path="stuff" component={Stuff} />
    <Route path="contact" component={Contact} />
	<Route path="login" component={Login} />
	<Route path="register" component={Register} />
    </Route>
  </Router>,
  destination
);
</script>
</body>
</html>